!function(e){function n(n){for(var i,l,s=n[0],a=n[1],d=n[2],u=0,p=[];u<s.length;u++)l=s[u],Object.prototype.hasOwnProperty.call(t,l)&&t[l]&&p.push(t[l][0]),t[l]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i]);for(c&&c(n);p.length;)p.shift()();return r.push.apply(r,d||[]),o()}function o(){for(var e,n=0;n<r.length;n++){for(var o=r[n],i=!0,s=1;s<o.length;s++){var a=o[s];0!==t[a]&&(i=!1)}i&&(r.splice(n--,1),e=l(l.s=o[0]))}return e}var i={},t={0:0},r=[];function l(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,l),o.l=!0,o.exports}l.m=e,l.c=i,l.d=function(e,n,o){l.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,n){if(1&n&&(e=l(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(l.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)l.d(o,i,function(n){return e[n]}.bind(null,i));return o},l.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(n,"a",n),n},l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},l.p="";var s=window.webpackJsonp=window.webpackJsonp||[],a=s.push.bind(s);s.push=n,s=s.slice();for(var d=0;d<s.length;d++)n(s[d]);var c=a;r.push([28,1]),o()}({24:function(e,n,o){},28:function(e,n,o){"use strict";o.r(n);o(10),o(14),o(15),o(16),o(17),o(2),o(18),o(19),o(5),o(20),o(21),o(22),o(23),o(24);var i=o(0),t=o.n(i),r=o(1);t()(document).ready(e=>{t()(".msProducts__thumb").each((e,n)=>{new r.a(t()(n).find("#msGallery .swiper-container")[0],{slidesPerView:"auto",centeredSlides:!0,loop:!1,slidesPerGroup:1,paginationClickable:!0})}),void 0!==window.msOptionsPrice&&(window.msOptionsPrice.Tools.setGalleryImage=function(e,n){let o=t()('.swiper-slide[data-iid="'+n+'"]');t()(o).closest(".swiper-container").each((e,n)=>{n.swiper.slideTo(t()(o).index())})})});var l=o(8),s=o.n(l),a=o(9),d=o.n(a);o(25),o(26),o(27);new Inputmask("phoneru").mask(t()('input[type="tel"]'));new s.a({elements_selector:".lazy"}),new d.a('a[href*="#"]',{offset:window.innerWidth>=992?37:0,speed:800,header:".header",easing:"easeInOutQuad"});let c=document.querySelector(".header");window.innerWidth>992&&(window.onscroll=e=>{c.classList.toggle("sticky",window.scrollY>0),document.body.classList.toggle("sticky",window.scrollY>0)}),t()(".nav-tabs a").on("click",(function(e){t()(this).tab("show")}));new r.a(".capabilitiesSlider.swiper-container",{slidesPerView:1,spaceBetween:0,allowTouchMove:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});(()=>{let e=[],n=[];t()(".gallery-top").each((function(o,i){i.querySelectorAll(".swiper-slide").length>1&&(e.push(new r.a(i,{spaceBetween:10,loopedSlides:3})),n.push(new r.a(i.nextElementSibling,{spaceBetween:10,slidesPerView:3,loopedSlides:3,watchSlidesVisibility:!0,watchSlidesProgress:!0,preventClicks:!1})))}));for(let o=0;o<e.length;o++)e[o].thumbs.swiper=n[o],n[o].on("click",(function(n){e[o].slideTo(t()(this.clickedSlide).index())}))})();new r.a(".swiper-container.msProductsSlider",{slidesPerView:4,spaceBetween:20,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1024:{slidesPerView:4}},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),new r.a(".gallery-slider",{slidesPerView:3,breakpoints:{320:{slidesPerView:1},1024:{slidesPerView:3}},centeredSlides:1,loop:!0,speed:400,spaceBetween:20,initialSlide:2,pagination:{el:".swiper-pagination",dynamicBullets:!0}});t()(".magnific").each((function(e,n){null===n.closest(".gallery-thumbs")?t()(n).magnificPopup({type:"image"}):n.addEventListener("click",e=>{e.preventDefault()})})),t()(document).on("msoneclick_after_init",(function(e,n){var o=t()(".msoptionsprice-product-"+msOneClick.Product.product_id);o.length&&msOptionsPrice.Product.action("modification/get",o)})),window.msProdCD={config:{url:"/service/ajax",template:"ls__tpl_msProduct_content_info",modal:t()("#modal_product_info"),modalThank:t()("#modal_thank"),selector:t()("#modal_product_info .modal-resource")},slider:{},order:function(e){let n={name:e.querySelector('[name="name"]').value,phone:e.querySelector('[name="phone"]').value,count:e.querySelector('[name="count"]').value,productId:e.querySelector('[name="id"]').value,email:e.querySelector('[name="email"]').value,option:JSON.stringify({color:t()(e).find('[name="options[color]"]:checked').val()})};t.a.ajax({url:window.msProdCD.config.url,type:"POST",data:{action:"order/create",order:n},success:e=>{JSON.parse(e).success&&(t()(msProdCD.config.modal).modal("hide"),t()(msProdCD.config.modalThank).modal("show"))},error:e=>{console.log(new Error(e))}})},init:function(){t()(window.msProdCD.config.modal).find("form").on("submit",(function(){return window.msProdCD.order(this),!1})),window.msProdCD.slider=new r.a(".msProductInfo .swiper-container",{loop:!1,autoplayDisableOnInteraction:!1,init:!1}),window.msOptionsPrice&&(window.msOptionsPrice.initialize(),setTimeout((function(){window.msProdCD.slider.init(),window.msOptionsPrice.Tools.setGalleryImage=function(e,n){let o=document.querySelector(".msProductInfo .swiper-container").querySelector('.swiper-slide[data-iid="'+n+'"]');null!==o&&window.msProdCD.slider.activeIndex!==t()(o).index()&&window.msProdCD.slider.slideTo(t()(o).index())}}),200))}},t()(window.msProdCD.config.modal).on("show.bs.modal",e=>{let n=e.relatedTarget.getAttribute("data-product-id");t.a.ajax({url:window.msProdCD.config.url,type:"POST",data:{action:"product/get",productId:n,template:window.msProdCD.config.template},dataType:"html",success:e=>{if(null==e)return!1;window.msProdCD.config.selector.html(e),window.msProdCD.init()},error:e=>{new Error(e)}})})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21zb3BHYWxsZXJ5LmpzIiwid2VicGFjazovLy8uL3NyYy9qcy9hcHAuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2pzL21zUHJvZHVjdENvbnRlbnREeW5hbWljLmpzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwiMCIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJlIiwiZWFjaCIsIlN3aXBlciIsImZpbmQiLCJzbGlkZXNQZXJWaWV3IiwiY2VudGVyZWRTbGlkZXMiLCJsb29wIiwic2xpZGVzUGVyR3JvdXAiLCJwYWdpbmF0aW9uQ2xpY2thYmxlIiwibXNPcHRpb25zUHJpY2UiLCJUb29scyIsInNldEdhbGxlcnlJbWFnZSIsInJpZCIsImlpZCIsInNsaWRlIiwiY2xvc2VzdCIsImNvbnRhaW5lciIsInN3aXBlciIsInNsaWRlVG8iLCJpbmRleCIsIklucHV0bWFzayIsIm1hc2siLCJMYXp5TG9hZCIsImVsZW1lbnRzX3NlbGVjdG9yIiwiU21vb3RoU2Nyb2xsIiwib2Zmc2V0IiwiaW5uZXJXaWR0aCIsInNwZWVkIiwiaGVhZGVyIiwiZWFzaW5nIiwicXVlcnlTZWxlY3RvciIsIm9uc2Nyb2xsIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwic2Nyb2xsWSIsImJvZHkiLCJvbiIsInRoaXMiLCJ0YWIiLCJzcGFjZUJldHdlZW4iLCJhbGxvd1RvdWNoTW92ZSIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJnYWxsZXJ5VG9wIiwiZ2FsbGVyeVRodW1icyIsImVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwibG9vcGVkU2xpZGVzIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwid2F0Y2hTbGlkZXNWaXNpYmlsaXR5Iiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsInByZXZlbnRDbGlja3MiLCJ0aHVtYnMiLCJjbGlja2VkU2xpZGUiLCJtdWx0aXBsZVNsaWRlcnMiLCJicmVha3BvaW50cyIsIjMyMCIsIjc2OCIsIjEwMjQiLCJpbml0aWFsU2xpZGUiLCJwYWdpbmF0aW9uIiwiZWwiLCJkeW5hbWljQnVsbGV0cyIsIm1hZ25pZmljUG9wdXAiLCJ0eXBlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInByZXZlbnREZWZhdWx0IiwiZm9ybSIsIm1zT25lQ2xpY2siLCJQcm9kdWN0IiwicHJvZHVjdF9pZCIsImFjdGlvbiIsIm1zUHJvZENEIiwiY29uZmlnIiwidXJsIiwidGVtcGxhdGUiLCJtb2RhbCIsIm1vZGFsVGhhbmsiLCJzZWxlY3RvciIsInNsaWRlciIsIm9yZGVyIiwicGhvbmUiLCJjb3VudCIsInByb2R1Y3RJZCIsImVtYWlsIiwib3B0aW9uIiwiSlNPTiIsInN0cmluZ2lmeSIsImNvbG9yIiwidmFsIiwiYWpheCIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsInBhcnNlIiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIiwiRXJyb3IiLCJpbml0IiwiYXV0b3BsYXlEaXNhYmxlT25JbnRlcmFjdGlvbiIsImluaXRpYWxpemUiLCJzZXRUaW1lb3V0IiwiYWN0aXZlSW5kZXgiLCJyZWxhdGVkVGFyZ2V0IiwiZ2V0QXR0cmlidXRlIiwiZGF0YVR5cGUiLCJodG1sIl0sIm1hcHBpbmdzIjoiYUFDRSxTQUFTQSxFQUFxQkMsR0FRN0IsSUFQQSxJQU1JQyxFQUFVQyxFQU5WQyxFQUFXSCxFQUFLLEdBQ2hCSSxFQUFjSixFQUFLLEdBQ25CSyxFQUFpQkwsRUFBSyxHQUlITSxFQUFJLEVBQUdDLEVBQVcsR0FDcENELEVBQUlILEVBQVNLLE9BQVFGLElBQ3pCSixFQUFVQyxFQUFTRyxHQUNoQkcsT0FBT0MsVUFBVUMsZUFBZUMsS0FBS0MsRUFBaUJYLElBQVlXLEVBQWdCWCxJQUNwRkssRUFBU08sS0FBS0QsRUFBZ0JYLEdBQVMsSUFFeENXLEVBQWdCWCxHQUFXLEVBRTVCLElBQUlELEtBQVlHLEVBQ1pLLE9BQU9DLFVBQVVDLGVBQWVDLEtBQUtSLEVBQWFILEtBQ3BEYyxFQUFRZCxHQUFZRyxFQUFZSCxJQUtsQyxJQUZHZSxHQUFxQkEsRUFBb0JoQixHQUV0Q08sRUFBU0MsUUFDZEQsRUFBU1UsT0FBVFYsR0FPRCxPQUhBVyxFQUFnQkosS0FBS0ssTUFBTUQsRUFBaUJiLEdBQWtCLElBR3ZEZSxJQUVSLFNBQVNBLElBRVIsSUFEQSxJQUFJQyxFQUNJZixFQUFJLEVBQUdBLEVBQUlZLEVBQWdCVixPQUFRRixJQUFLLENBRy9DLElBRkEsSUFBSWdCLEVBQWlCSixFQUFnQlosR0FDakNpQixHQUFZLEVBQ1JDLEVBQUksRUFBR0EsRUFBSUYsRUFBZWQsT0FBUWdCLElBQUssQ0FDOUMsSUFBSUMsRUFB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LE1BQU1DLGdCQUFrQixTQUFVQyxFQUFLQyxHQUN6RCxJQUFJQyxFQUFRaEIsU0FBU2dDLGNBQWMsb0NBQW9DQSxjQUFjLDJCQUE2QmpCLEVBQU0sTUFDM0csT0FBVkMsR0FBa0JwQixPQUFPK0UsU0FBU08sT0FBT3VCLGNBQWdCMUcsSUFBRWlCLEdBQU9LLFNBQ2pFekIsT0FBTytFLFNBQVNPLE9BQU85RCxRQUFRckIsSUFBRWlCLEdBQU9LLFlBR2xELFFBTWR0QixJQUFFSCxPQUFPK0UsU0FBU0MsT0FBT0csT0FBT3pDLEdBQUcsZ0JBQWtCcEMsSUFDakQsSUFBSW9GLEVBQVlwRixFQUFFd0csY0FBY0MsYUFBYSxtQkFDN0M1RyxJQUFFOEYsS0FBSyxDQUNIaEIsSUFBS2pGLE9BQU8rRSxTQUFTQyxPQUFPQyxJQUM1QlYsS0FBTSxPQUNObEksS0FBTSxDQUNGeUksT0FBUSxjQUNSWSxZQUNBUixTQUFVbEYsT0FBTytFLFNBQVNDLE9BQU9FLFVBRXJDOEIsU0FBVSxPQUNWZCxRQUFVQyxJQUNOLEdBQWUsTUFBWkEsRUFBa0IsT0FBTyxFQUM1Qm5HLE9BQU8rRSxTQUFTQyxPQUFPSyxTQUFTNEIsS0FBS2QsR0FDckNuRyxPQUFPK0UsU0FBUzBCLFFBRXBCSixNQUFRQSxJQUNKLElBQUlHLE1BQU1IIiwiZmlsZSI6ImpzL21haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChpbnN0YWxsZWRDaHVua3MsIGNodW5rSWQpICYmIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG5cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzI4LDFdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JztcclxuXHJcbmltcG9ydCBTd2lwZXIgZnJvbSAnc3dpcGVyJztcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KChlKSA9PiB7XHJcbiAgICAkKCcubXNQcm9kdWN0c19fdGh1bWInKS5lYWNoKChrZXksIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgbGV0IHNsaWRlciA9IG5ldyBTd2lwZXIoJCh2YWx1ZSkuZmluZCgnI21zR2FsbGVyeSAuc3dpcGVyLWNvbnRhaW5lcicpWzBdLCB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogMSxcclxuICAgICAgICAgICAgcGFnaW5hdGlvbkNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgaWYodHlwZW9mKHdpbmRvdy5tc09wdGlvbnNQcmljZSkgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgd2luZG93Lm1zT3B0aW9uc1ByaWNlLlRvb2xzLnNldEdhbGxlcnlJbWFnZSA9IGZ1bmN0aW9uIChyaWQsIGlpZCkge1xyXG4gICAgICAgICAgICBsZXQgc2xpZGUgPSAkKCcuc3dpcGVyLXNsaWRlW2RhdGEtaWlkPVwiJyArIGlpZCArICdcIl0nKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coe3JpZCwgaWlkfSk7XHJcbiAgICAgICAgICAgICQoc2xpZGUpLmNsb3Nlc3QoJy5zd2lwZXItY29udGFpbmVyJykuZWFjaCgoa2V5LCBjb250YWluZXIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5zd2lwZXIuc2xpZGVUbygkKHNsaWRlKS5pbmRleCgpKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0pIiwiLy8gaW1wb3J0IEFPUyBmcm9tIFwiYW9zXCI7XG5pbXBvcnQgTGF6eUxvYWQgZnJvbSBcImxhenlsb2FkXCI7XG5pbXBvcnQgU21vb3RoU2Nyb2xsIGZyb20gXCJzbW9vdGgtc2Nyb2xsXCI7XG5pbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XG5pbXBvcnQgU3dpcGVyIGZyb20gXCJzd2lwZXJcIjtcbmltcG9ydCAnanF1ZXJ5LmlucHV0bWFzayc7XG5pbXBvcnQgJ2lucHV0bWFzay5waG9uZS5leHRlbnNpb25zJztcbmltcG9ydCBcImlucHV0bWFzay5waG9uZS1jb2Rlcy1ydVwiO1xuXG5sZXQgaW0gPSBuZXcgSW5wdXRtYXNrKCdwaG9uZXJ1Jyk7XG5pbS5tYXNrKCQoJ2lucHV0W3R5cGU9XCJ0ZWxcIl0nKSk7XG5cbmxldCBsYXp5SW5pdCA9IG5ldyBMYXp5TG9hZCh7XG4gICAgZWxlbWVudHNfc2VsZWN0b3I6IFwiLmxhenlcIlxufSk7XG5sZXQgc2Nyb2xsID0gbmV3IFNtb290aFNjcm9sbCgnYVtocmVmKj1cIiNcIl0nLHtcbiAgICBvZmZzZXQ6IHdpbmRvdy5pbm5lcldpZHRoID49IDk5MiA/IDc0LzIgOiAwLFxuICAgIHNwZWVkOiA4MDAsXG4gICAgaGVhZGVyOiAnLmhlYWRlcicsXG4gICAgZWFzaW5nOiAnZWFzZUluT3V0UXVhZCdcbn0pO1xuXG5sZXQgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcicpO1xuXG5pZih3aW5kb3cuaW5uZXJXaWR0aCA+IDk5Mikge1xuICAgIHdpbmRvdy5vbnNjcm9sbCA9IChlKSA9PiB7XG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKCdzdGlja3knLCB3aW5kb3cuc2Nyb2xsWSA+IDApO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoJ3N0aWNreScsIHdpbmRvdy5zY3JvbGxZID4gMCk7XG4gICAgfVxufVxuJChcIi5uYXYtdGFicyBhXCIpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XG4gICAgJCh0aGlzKS50YWIoJ3Nob3cnKTtcbn0pO1xuXG5sZXQgY2FwU2xpZGVyID0gbmV3IFN3aXBlcignLmNhcGFiaWxpdGllc1NsaWRlci5zd2lwZXItY29udGFpbmVyJywge1xuICAgIHNsaWRlc1BlclZpZXc6IDEsXG4gICAgc3BhY2VCZXR3ZWVuOiAwLFxuICAgIGFsbG93VG91Y2hNb3ZlOiBmYWxzZSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICB9LFxufSk7XG5cbmNvbnN0IG11bHRpcGxlU2xpZGVycyA9ICgpID0+IHtcbiAgICBsZXQgZ2FsbGVyeVRvcCA9IFtdO1xuICAgIGxldCBnYWxsZXJ5VGh1bWJzID0gW107XG5cbiAgICAkKFwiLmdhbGxlcnktdG9wXCIpLmVhY2goZnVuY3Rpb24oaW5kZXgsIGVsZW1lbnQpe1xuICAgICAgICBpZihlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zd2lwZXItc2xpZGUnKS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBnYWxsZXJ5VG9wLnB1c2gobmV3IFN3aXBlcihlbGVtZW50LCB7XG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcbiAgICAgICAgICAgICAgICBsb29wZWRTbGlkZXM6IDMsIC8vbG9vcGVkIHNsaWRlcyBzaG91bGQgYmUgdGhlIHNhbWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGdhbGxlcnlUaHVtYnMucHVzaChuZXcgU3dpcGVyKGVsZW1lbnQubmV4dEVsZW1lbnRTaWJsaW5nLCB7XG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxuICAgICAgICAgICAgICAgIGxvb3BlZFNsaWRlczogMywgLy9sb29wZWQgc2xpZGVzIHNob3VsZCBiZSB0aGUgc2FtZVxuICAgICAgICAgICAgICAgIHdhdGNoU2xpZGVzVmlzaWJpbGl0eTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB3YXRjaFNsaWRlc1Byb2dyZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHByZXZlbnRDbGlja3M6IGZhbHNlLFxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbGxlcnlUb3AubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZ2FsbGVyeVRvcFtpXS50aHVtYnMuc3dpcGVyID0gZ2FsbGVyeVRodW1ic1tpXTtcbiAgICAgICAgZ2FsbGVyeVRodW1ic1tpXS5vbignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZ2FsbGVyeVRvcFtpXS5zbGlkZVRvKCQodGhpcy5jbGlja2VkU2xpZGUpLmluZGV4KCkpO1xuICAgICAgICB9KVxuICAgIH1cbn1cblxubXVsdGlwbGVTbGlkZXJzKCk7XG5cblxubGV0IG1zUHJvZHVjdHNTbGlkZXIgPSBuZXcgU3dpcGVyKCcuc3dpcGVyLWNvbnRhaW5lci5tc1Byb2R1Y3RzU2xpZGVyJywge1xuICAgIHNsaWRlc1BlclZpZXc6IDQsXG4gICAgc3BhY2VCZXR3ZWVuOiAyMCxcbiAgICBicmVha3BvaW50czp7XG4gICAgICAgIDMyMDoge1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMVxuICAgICAgICB9LFxuICAgICAgICA3Njg6IHtcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDJcbiAgICAgICAgfSxcbiAgICAgICAgMTAyNDoge1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNFxuICAgICAgICB9XG4gICAgfSxcbiAgICBuYXZpZ2F0aW9uOiB7XG4gICAgICAgIG5leHRFbDogJy5zd2lwZXItYnV0dG9uLW5leHQnLFxuICAgICAgICBwcmV2RWw6ICcuc3dpcGVyLWJ1dHRvbi1wcmV2JyxcbiAgICB9LFxufSk7XG5cbmxldCBnYWxsZXJ5ID0gbmV3IFN3aXBlcignLmdhbGxlcnktc2xpZGVyJyx7XG4gICAgc2xpZGVzUGVyVmlldzogMyxcbiAgICBicmVha3BvaW50czoge1xuICAgICAgICAzMjA6e1xuICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMVxuICAgICAgICB9LFxuICAgICAgICAxMDI0OntcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDNcbiAgICAgICAgfVxuICAgIH0sXG4gICAgY2VudGVyZWRTbGlkZXM6IDEsXG4gICAgbG9vcDogITAsXG4gICAgc3BlZWQ6IDQwMCxcbiAgICBzcGFjZUJldHdlZW46IDIwLFxuICAgIGluaXRpYWxTbGlkZTogMixcbiAgICBwYWdpbmF0aW9uOiB7XG4gICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcbiAgICAgICAgZHluYW1pY0J1bGxldHM6IHRydWUsXG4gICAgfSxcbn0pO1xuJCgnLm1hZ25pZmljJykuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpIHtcbiAgICBpZihlbGVtZW50LmNsb3Nlc3QoJy5nYWxsZXJ5LXRodW1icycpID09PSBudWxsKXtcbiAgICAgICAgJChlbGVtZW50KS5tYWduaWZpY1BvcHVwKHtcbiAgICAgICAgICAgIHR5cGU6ICdpbWFnZSdcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsKGUpID0+IHtlLnByZXZlbnREZWZhdWx0KCl9KTtcbiAgICB9XG59KVxuJChkb2N1bWVudCkub24oJ21zb25lY2xpY2tfYWZ0ZXJfaW5pdCcsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XG4gICAgdmFyIGZvcm0gPSAkKCcubXNvcHRpb25zcHJpY2UtcHJvZHVjdC0nK21zT25lQ2xpY2suUHJvZHVjdC5wcm9kdWN0X2lkKTtcbiAgICBpZiAoZm9ybS5sZW5ndGgpIHtcbiAgICAgICAgbXNPcHRpb25zUHJpY2UuUHJvZHVjdC5hY3Rpb24oJ21vZGlmaWNhdGlvbi9nZXQnLGZvcm0pXG4gICAgfVxufSkiLCJpbXBvcnQgJCBmcm9tICdqcXVlcnknO1xyXG5pbXBvcnQgU3dpcGVyIGZyb20gXCJzd2lwZXJcIjtcclxud2luZG93Lm1zUHJvZENEID0ge1xyXG4gICAgY29uZmlnOiB7XHJcbiAgICAgICAgdXJsOiAnL3NlcnZpY2UvYWpheCcsXHJcbiAgICAgICAgdGVtcGxhdGU6ICdsc19fdHBsX21zUHJvZHVjdF9jb250ZW50X2luZm8nLFxyXG4gICAgICAgIG1vZGFsOiAkKCcjbW9kYWxfcHJvZHVjdF9pbmZvJyksXHJcbiAgICAgICAgbW9kYWxUaGFuazogJCgnI21vZGFsX3RoYW5rJyksXHJcbiAgICAgICAgc2VsZWN0b3I6ICQoJyNtb2RhbF9wcm9kdWN0X2luZm8gLm1vZGFsLXJlc291cmNlJyksXHJcbiAgICB9LFxyXG4gICAgc2xpZGVyOiB7fSxcclxuICAgIG9yZGVyOiBmdW5jdGlvbihmb3JtKSB7XHJcbiAgICAgICAgbGV0IG9yZGVyID0ge1xyXG4gICAgICAgICAgICBuYW1lOiBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwibmFtZVwiXScpLnZhbHVlLFxyXG4gICAgICAgICAgICBwaG9uZTogZm9ybS5xdWVyeVNlbGVjdG9yKCdbbmFtZT1cInBob25lXCJdJykudmFsdWUsXHJcbiAgICAgICAgICAgIGNvdW50OiBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiY291bnRcIl0nKS52YWx1ZSxcclxuICAgICAgICAgICAgcHJvZHVjdElkOiBmb3JtLnF1ZXJ5U2VsZWN0b3IoJ1tuYW1lPVwiaWRcIl0nKS52YWx1ZSxcclxuICAgICAgICAgICAgZW1haWw6IGZvcm0ucXVlcnlTZWxlY3RvcignW25hbWU9XCJlbWFpbFwiXScpLnZhbHVlLFxyXG4gICAgICAgICAgICBvcHRpb246IEpTT04uc3RyaW5naWZ5KHtjb2xvcjogJChmb3JtKS5maW5kKCdbbmFtZT1cIm9wdGlvbnNbY29sb3JdXCJdOmNoZWNrZWQnKS52YWwoKX0pXHJcbiAgICAgICAgfVxyXG4gICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgIHVybDogd2luZG93Lm1zUHJvZENELmNvbmZpZy51cmwsXHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnb3JkZXIvY3JlYXRlJyxcclxuICAgICAgICAgICAgICAgIG9yZGVyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXNwb25zZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IGRhdGEgPSBKU09OLnBhcnNlKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuc3VjY2Vzcyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJChtc1Byb2RDRC5jb25maWcubW9kYWwpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChtc1Byb2RDRC5jb25maWcubW9kYWxUaGFuaykubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cobmV3IEVycm9yKGVycm9yKSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSlcclxuICAgIH0sXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh3aW5kb3cubXNQcm9kQ0QuY29uZmlnLm1vZGFsKS5maW5kKCdmb3JtJykub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93Lm1zUHJvZENELm9yZGVyKHRoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSlcclxuICAgICAgICB3aW5kb3cubXNQcm9kQ0Quc2xpZGVyID0gbmV3IFN3aXBlcignLm1zUHJvZHVjdEluZm8gLnN3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgICAgIGxvb3A6IGZhbHNlLFxyXG4gICAgICAgICAgICBhdXRvcGxheURpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcclxuICAgICAgICAgICAgaW5pdDogZmFsc2VcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAod2luZG93Lm1zT3B0aW9uc1ByaWNlKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5tc09wdGlvbnNQcmljZS5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lm1zUHJvZENELnNsaWRlci5pbml0KCk7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubXNPcHRpb25zUHJpY2UuVG9vbHMuc2V0R2FsbGVyeUltYWdlID0gZnVuY3Rpb24gKHJpZCwgaWlkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNsaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1zUHJvZHVjdEluZm8gLnN3aXBlci1jb250YWluZXInKS5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLXNsaWRlW2RhdGEtaWlkPVwiJyArIGlpZCArICdcIl0nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihzbGlkZSAhPT0gbnVsbCAmJiB3aW5kb3cubXNQcm9kQ0Quc2xpZGVyLmFjdGl2ZUluZGV4ICE9PSAkKHNsaWRlKS5pbmRleCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5tc1Byb2RDRC5zbGlkZXIuc2xpZGVUbygkKHNsaWRlKS5pbmRleCgpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sMjAwKVxyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiQod2luZG93Lm1zUHJvZENELmNvbmZpZy5tb2RhbCkub24oJ3Nob3cuYnMubW9kYWwnLCAoZSkgPT4ge1xyXG4gICAgbGV0IHByb2R1Y3RJZCA9IGUucmVsYXRlZFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvZHVjdC1pZCcpO1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6IHdpbmRvdy5tc1Byb2RDRC5jb25maWcudXJsLFxyXG4gICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgIGFjdGlvbjogJ3Byb2R1Y3QvZ2V0JyxcclxuICAgICAgICAgICAgcHJvZHVjdElkLFxyXG4gICAgICAgICAgICB0ZW1wbGF0ZTogd2luZG93Lm1zUHJvZENELmNvbmZpZy50ZW1wbGF0ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZGF0YVR5cGU6ICdodG1sJyxcclxuICAgICAgICBzdWNjZXNzOiAocmVzcG9uc2UpID0+IHtcclxuICAgICAgICAgICAgaWYocmVzcG9uc2UgPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB3aW5kb3cubXNQcm9kQ0QuY29uZmlnLnNlbGVjdG9yLmh0bWwocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB3aW5kb3cubXNQcm9kQ0QuaW5pdCgpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBuZXcgRXJyb3IoZXJyb3IpO1xyXG4gICAgICAgIH0sXHJcbiAgICB9KVxyXG59KVxyXG5cclxuXHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9